{"ast":null,"code":"import{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SendEmail(){const[subject,setSubject]=useState(\"\");const[message,setMessage]=useState(\"\");const[status,setStatus]=useState(\"\");const navigate=useNavigate();const recipientEmail=\"group.nmc@psn.co.id\";// Fixed recipient email\nuseEffect(()=>{if(!localStorage.getItem(\"email\")||!localStorage.getItem(\"password\")){navigate(\"/\");}},[navigate]);const handleSendEmail=async e=>{e.preventDefault();try{const email=localStorage.getItem(\"email\");const password=localStorage.getItem(\"password\");await axios.post(\"http://192.168.1.13:4000/send-email\",{email,password,to:recipientEmail,subject,message});// ✅ Clear input fields\nsetSubject(\"\");setMessage(\"\");// ✅ Show success message\nsetStatus(\"✅ Email sent successfully!\");// ✅ Hide success message after 3 seconds\nsetTimeout(()=>setStatus(\"\"),3000);}catch(err){setStatus(\"❌ Failed to send email.\");console.error(\"Email sending error:\",err);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center align-items-center vh-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 shadow-lg w-50\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Daily Activity\"}),status&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success text-center\",children:status}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendEmail,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Recipient Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:recipientEmail,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Subject\",value:subject,onChange:e=>setSubject(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",placeholder:\"Write your message here...\",value:message,onChange:e=>setMessage(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success w-100\",children:\"Send Email\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger w-100 mt-3\",onClick:()=>navigate(\"/logout\"),children:\"Logout\"})]})]})});}export default SendEmail;","map":{"version":3,"names":["useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","SendEmail","subject","setSubject","message","setMessage","status","setStatus","navigate","recipientEmail","localStorage","getItem","handleSendEmail","e","preventDefault","email","password","post","to","setTimeout","err","console","error","className","children","onSubmit","type","value","readOnly","placeholder","onChange","target","required","onClick"],"sources":["C:/Users/Acer/Documents/daily/email-daily-main/frontend/src/SendEmail.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nfunction SendEmail() {\n  const [subject, setSubject] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const navigate = useNavigate();\n  const recipientEmail = \"group.nmc@psn.co.id\"; // Fixed recipient email\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"email\") || !localStorage.getItem(\"password\")) {\n      navigate(\"/\");\n    }\n  }, [navigate]);\n\n  const handleSendEmail = async (e) => {\n    e.preventDefault();\n    try {\n      const email = localStorage.getItem(\"email\");\n      const password = localStorage.getItem(\"password\");\n\n      await axios.post(\"http://192.168.1.13:4000/send-email\", {\n        email,\n        password,\n        to: recipientEmail,\n        subject,\n        message,\n      });\n\n      // ✅ Clear input fields\n      setSubject(\"\");\n      setMessage(\"\");\n\n      // ✅ Show success message\n      setStatus(\"✅ Email sent successfully!\");\n\n      // ✅ Hide success message after 3 seconds\n      setTimeout(() => setStatus(\"\"), 3000);\n    } catch (err) {\n      setStatus(\"❌ Failed to send email.\");\n      console.error(\"Email sending error:\", err);\n    }\n  };\n\n  return (\n    <div className=\"container d-flex justify-content-center align-items-center vh-100\">\n      <div className=\"card p-4 shadow-lg w-50\">\n        <h2 className=\"text-center\">Daily Activity</h2>\n        {status && <div className=\"alert alert-success text-center\">{status}</div>}\n        <form onSubmit={handleSendEmail}>\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Recipient Email</label>\n            <input type=\"email\" className=\"form-control\" value={recipientEmail} readOnly />\n          </div>\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Subject</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Subject\"\n              value={subject}\n              onChange={(e) => setSubject(e.target.value)}\n              required\n            />\n          </div>\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Message</label>\n            <textarea\n              className=\"form-control\"\n              placeholder=\"Write your message here...\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              required\n            />\n          </div>\n          <button type=\"submit\" className=\"btn btn-success w-100\">Send Email</button>\n          <button className=\"btn btn-danger w-100 mt-3\" onClick={() => navigate(\"/logout\")}>Logout</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default SendEmail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}